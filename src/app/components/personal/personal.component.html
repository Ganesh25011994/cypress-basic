<app-loader [isLoading]="loading"></app-loader>
<div *ngIf="!loading">
  <h2>Customer Details</h2>
    <form [formGroup]="personalDetails"
        (ngSubmit)="personalDetailsSave()">
        <div class="row g-6">
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" formControlName="sourcingChannel" id="sourcingChannel"
                (change)="sourceOfLeadChange($event, 'set')">
                  <option *ngFor="let title of sourcingChannelList" [value]="title.CODE">{{title.NAME}}</option>
              </select>
              <label for="sourcingChannel">Sourcing Channel</label>
            </div>
            <div class="text-danger small mt-1">
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'sourcingChannel','validation_messages': validation_messages['sourcingChannel'] }">
              </app-validation-error-messages>
            </div>
          </div>

          <div class="col-md-6" *ngIf="sourceInputType">
            <div class="form-floating">
              <input class="form-control" id="srcId" type="text" formControlName="srcId">
              <label for="srcId">Sourcing ID</label>
            </div>
            <div class="text-danger small mt-1">
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'srcId','validation_messages': validation_messages['srcId'] }">
                </app-validation-error-messages>
            </div>
          </div>

          <div class="col-md-6" *ngIf="sourcedrobdownType">
            <div class="form-floating">
              <select class="form-select" formControlName="srcId" id="srcId">
                  <option *ngFor="let title of sourcingMasterList" [value]="title.userId">{{title.userName}}</option>
              </select>
              <label for="sourcingChannel">Sourcing ID</label>
            </div>
            <div class="text-danger small mt-1">
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'srcId','validation_messages': validation_messages['srcId'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control" id="branchName" type="text" formControlName="branchName">
              <label for="branchName">Branch Name</label>
            </div>
            <div class="text-danger small mt-1">
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'branchName','validation_messages': validation_messages['branchName'] }">
                </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="branchCode" type="text" formControlName="branchCode">
              <label for="branchCode">Branch Code</label>
            </div>
            <div>
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'branchCode','validation_messages': validation_messages['branchCode'] }">
                </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="lgName" type="text" formControlName="lgName">
              <label for="lgName">LG Name</label>
            </div>
            
            <div>
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'lgName','validation_messages': validation_messages['lgName'] }">
                </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="lgId" type="text" formControlName="lgId">
              <label for="lgId">LG ID</label>
            </div>            
            <div>
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'lgId','validation_messages': validation_messages['lgId'] }">
                </app-validation-error-messages>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="leadReferal" type="text" formControlName="leadReferal">
              <label for="leadReferal">Lead Referal</label>
            </div>            
            <div>
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'leadReferal','validation_messages': validation_messages['leadReferal'] }">
                </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" formControlName="title" id="title">
                <option *ngFor="let title of titleList" [value]="title.CODE">{{title.NAME}}</option>
              </select>
              <label>Select Your Title</label>
            </div>
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'title','validation_messages': validation_messages['title'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="firstName" type="text" formControlName="firstName">
              <label>Enter Your FirstName:</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'firstName','validation_messages': validation_messages['firstName'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="middleName" type="text" formControlName="middleName">
              <label>Enter Your MiddleName:</label>
            </div>
            <div>
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'middleName','validation_messages': validation_messages['middleName'] }">
                </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="lastName" type="text" formControlName="lastName">
              <label>Enter Your LastName:</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'lastName','validation_messages': validation_messages['lastName'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="fatherName" type="text" formControlName="fatherName">
              <label>Enter Your FatherName:</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'fatherName','validation_messages': validation_messages['fatherName'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="motherName" type="text" formControlName="motherName">
              <label>Enter Your MotherName:</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'motherName','validation_messages': validation_messages['motherName'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="maritalStatus" formControlName="maritalStatus" (change)="maritalStatus($event, 'set')">
                  <option *ngFor="let list of maritalStatusList" [value]="list.CODE">{{list.NAME}}</option>
              </select>
              <label>Marital Status</label>
            </div>
              <div>
                <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'maritalStatus','validation_messages': validation_messages['maritalStatus'] }">
                </app-validation-error-messages>
              </div>
          </div>

          <div class="col-md-6" *ngIf="personalDetails.controls['maritalStatus'].value == '1'">
            <div class="form-floating">
              <input class="form-control"id="spouseName" type="text" formControlName="spouseName">
              <label>Enter Your spouse Name:</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'spouseName','validation_messages': validation_messages['spouseName'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="gender" formControlName="gender">
                  <option *ngFor="let list of genderList" [value]="list.CODE">{{list.NAME}}</option>
              </select>
              <label>Gender</label>
            </div>
              
              <div>
                <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'gender','validation_messages': validation_messages['gender'] }">
                </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="dob" type="date" formControlName="dob" 
              [max]="maxdate" [min]="mindata">
              <label>Enter Your DOB</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'dob','validation_messages': validation_messages['dob'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="mobileNo" type="text" formControlName="mobileNo">
              <label>Enter Your Mobile Number:</label>
            </div>
              
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'mobileNo','validation_messages': validation_messages['mobileNo'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="alternateMobileNo" type="text" formControlName="alternateMobileNo">
              <label>Enter Your Aletername Mobile Number:</label>
            </div>
            
            <div>
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'alternateMobileNo','validation_messages': validation_messages['alternateMobileNo'] }">
                </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="emailId" type="text" formControlName="emailId">
              <label>Enter Your Email ID:</label>
            </div>
              
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'emailId','validation_messages': validation_messages['emailId'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="leadId" type="text" formControlName="leadId">
              <label>Lead ID:</label>
            </div>
              
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'leadId','validation_messages': validation_messages['leadId'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="distanceFromBranch" type="text" formControlName="distanceFromBranch">
              <label>Distance From Branch:</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'distanceFromBranch','validation_messages': validation_messages['distanceFromBranch'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="monthlyIncome" type="number" formControlName="monthlyIncome">
              <label>Monthly Income</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'monthlyIncome','validation_messages': validation_messages['monthlyIncome'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="loanRequested" type="number" formControlName="loanRequested">
              <label>Loan Amount Requested</label>
            </div>
              
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'loanRequested','validation_messages': validation_messages['loanRequested'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="schemeRequested" formControlName="schemeRequested">
                  <option *ngFor="let title of schemeRequestList" [value]="title.prdCode">{{title.prdDesc}}</option>
              </select>
              <label>Scheme Requested</label>
            </div>
             
              <div>
                <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'schemeRequested','validation_messages': validation_messages['schemeRequested'] }">
                </app-validation-error-messages>
              </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="differentlyAbled" formControlName="differentlyAbled">
                  <option *ngFor="let list of yesnoList" [value]="list.CODE">{{list.NAME}}</option>
              </select>
              <label>Differently Abled</label>
            </div>
            
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'differentlyAbled','validation_messages': validation_messages['differentlyAbled'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="religion" formControlName="religion">
                  <option *ngFor="let list of religionList" [value]="list.CODE">{{list.NAME}}</option>
              </select>
              <label>Religion</label>
            </div>
            
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'religion','validation_messages': validation_messages['religion'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="category" formControlName="category">
                  <option *ngFor="let list of categoryList" [value]="list.CODE">{{list.NAME}}</option>
              </select>
              <label>Category</label>
            </div>
            
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'category','validation_messages': validation_messages['category'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <label>Politically Exposed Person</label>
              <select class="form-select" id="politicallyExposedPerson" formControlName="politicallyExposedPerson">
                  <option *ngFor="let list of yesnoList" [value]="list.CODE">{{list.NAME}}</option>
              </select>
            </div>
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'politicallyExposedPerson','validation_messages': validation_messages['politicallyExposedPerson'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="qualification" formControlName="qualification">
                  <option *ngFor="let list of qualificationList" [value]="list.CODE">{{list.NAME}}</option>
              </select>
              <label>Qualification</label>
            </div>
            
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'qualification','validation_messages': validation_messages['qualification'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="occupationMainCategory" formControlName="occupationMainCategory"
              (change)="onMainChg($event)">
                <option *ngFor="let list of occupationMainList" [value]="list.LevelCode">{{list.Description}}</option>
              </select>
              <label>Occupation Main Category</label>
            </div>
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'occupationMainCategory','validation_messages': validation_messages['occupationMainCategory'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="occupationSubcategory" formControlName="occupationSubcategory"
              (change)="onSubChg($event)">
                <option *ngFor="let list of occupationsubList" [value]="list.LevelCode">{{list.Description}}</option>
              </select>
              <label>Occupation Sub Category</label>
            </div>
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'occupationSubcategory','validation_messages': validation_messages['occupationSubcategory'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div class="col-md-6" *ngIf="occupationcodeShow">
            <div class="form-floating">
              <select class="form-select" id="occupation" formControlName="occupation">
                <option *ngFor="let list of occupationList" [value]="list.LevelCode">{{list.Description}}</option>
              </select>
              <label>Occupation</label>
            </div>
            <div>
              <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'occupation','validation_messages': validation_messages['occupation'] }">
              </app-validation-error-messages>
            </div>
          </div>
  
          <div>
            <label>Total Working Years and Months</label>
            <div class="input-group">
              <div class="col-md-6" style="padding-right: 15px;">
                <div class="form-floating">
                  <select class="form-select" id="totalWorkExperienceYear" formControlName="totalWorkExperienceYear">
                    <option *ngFor="let list of yearsList" [value]="list.CODE">{{list.NAME}}</option>
                  </select>
                  <label style="margin-left: 10px;">Years</label>
                </div>
                  <div>
                    <app-validation-error-messages
                      [formData]="{'formName': personalDetails, 'fieldName': 'totalWorkExperienceYear','validation_messages': validation_messages['totalWorkExperienceYear'] }">
                    </app-validation-error-messages>
                  </div>
              </div>
  
              <div class="col-md-6" style="padding-left: 15px;">
                <div class="form-floating">
                  <select class="form-select" id="totalWorkExperienceMonth" formControlName="totalWorkExperienceMonth">
                    <option *ngFor="let list of monthsList" [value]="list.CODE">{{list.NAME}}</option>
                  </select>
                  <label style="margin-left: 10px;">Months</label>
                </div>
                  
                <div>
                  <app-validation-error-messages
                    [formData]="{'formName': personalDetails, 'fieldName': 'totalWorkExperienceMonth','validation_messages': validation_messages['totalWorkExperienceMonth'] }">
                  </app-validation-error-messages>
                </div>
              </div>
            </div>
  
          </div>
  
          <div>
            <label>Current Working Years and Months</label>
            <div class="input-group">
              <div class="col-md-6" style="padding-right: 15px;">
                <div class="form-floating"> 
                  <select class="form-select" id="currentWorkExperienceYear" formControlName="currentWorkExperienceYear">
                    <option *ngFor="let list of yearsList" [value]="list.CODE">{{list.NAME}}</option>
                  </select>
                  <label style="margin-left: 10px;">Years</label>
                </div>
                <div>
                  <app-validation-error-messages
                    [formData]="{'formName': personalDetails, 'fieldName': 'currentWorkExperienceYear','validation_messages': validation_messages['currentWorkExperienceYear'] }">
                  </app-validation-error-messages>
                </div>
              </div>
  
              <div class="col-md-6" style="padding-left: 15px;">
                <div class="form-floating">
                  <select class="form-select" id="currentWorkExperienceMonth" formControlName="currentWorkExperienceMonth">
                    <option *ngFor="let list of monthsList" [value]="list.CODE">{{list.NAME}}</option>
                  </select>
                  <label style="margin-left: 10px;">Months</label>
                </div>
                  
                  <div>
                    <app-validation-error-messages
                      [formData]="{'formName': personalDetails, 'fieldName': 'currentWorkExperienceMonth','validation_messages': validation_messages['currentWorkExperienceMonth'] }">
                    </app-validation-error-messages>
                  </div>
              </div>
            </div>
          </div>
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="personalExpense" type="number" formControlName="personalExpense">
              <label>Personal Expense</label>
            </div>
              <div>
                  <app-validation-error-messages
                  [formData]="{'formName': personalDetails, 'fieldName': 'personalExpense','validation_messages': validation_messages['personalExpense'] }">
                  </app-validation-error-messages>
              </div>
          </div>
  
          <div>
            <label>Total Number of Years stay in City</label>
            <div class="input-group">
              <div class="col-md-6" style="padding-right: 15px;">
                <div class="form-floating">
                  <select class="form-select" id="totalnoOfYear" formControlName="totalnoOfYear">
                    <option *ngFor="let list of yearsList" [value]="list.CODE">{{list.NAME}}</option>
                  </select>
                  <label style="margin-left: 10px;">Years</label>
                </div>
                <div>
                  <app-validation-error-messages
                    [formData]="{'formName': personalDetails, 'fieldName': 'totalnoOfYear','validation_messages': validation_messages['totalnoOfYear'] }">
                  </app-validation-error-messages>
                </div>
              </div>
  
              <div class="col-md-6" style="padding-left: 15px;">
                <div class="form-floating">
                  <select class="form-select" id="totalnoOfMonth" formControlName="totalnoOfMonth">
                    <option *ngFor="let list of monthsList" [value]="list.CODE">{{list.NAME}}</option>
                  </select>
                  <label style="margin-left: 10px;">Months</label>
                </div>
                  
                <div>
                  <app-validation-error-messages
                    [formData]="{'formName': personalDetails, 'fieldName': 'totalnoOfMonth','validation_messages': validation_messages['totalnoOfMonth'] }">
                  </app-validation-error-messages>
                </div>
              </div>
            </div>
          </div>
  
  
          <div class="col-md-6">
            <div class="form-floating">
              <input class="form-control"id="cifId" type="number" formControlName="cifId">
              <label>CIF ID</label>
            </div>
            
            <div>
                <app-validation-error-messages
                [formData]="{'formName': personalDetails, 'fieldName': 'cifId','validation_messages': validation_messages['cifId'] }">
                </app-validation-error-messages>
            </div>
          </div>
  
        <div class="col-md-6">
          <div class="form-floating">
            <select class="form-select" id="panAvail" formControlName="panAvail">
              <option *ngFor="let list of yesnoList" [value]="list.CODE">{{list.NAME}}</option>
            </select>
            <label>Form 60</label>
          </div>
            
          <div>
            <app-validation-error-messages
              [formData]="{'formName': personalDetails, 'fieldName': 'panAvail','validation_messages': validation_messages['panAvail'] }">
            </app-validation-error-messages>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-floating">
            <select class="form-select" id="voicesmsreq" formControlName="voicesmsreq" (change)="prefferedlanguageShow($event, 'set')">
              <option *ngFor="let list of yesnoList" [value]="list.CODE">{{list.NAME}}</option>
            </select>
            <label>Voice SMS Request</label>
          </div>
            
          <div>
            <app-validation-error-messages
              [formData]="{'formName': personalDetails, 'fieldName': 'voicesmsreq','validation_messages': validation_messages['voicesmsreq'] }">
            </app-validation-error-messages>
          </div>
        </div>

        <div class="col-md-6" *ngIf="showPreferredlanguage">
          <div class="form-floating">
            <select class="form-select" id="preferredlanguage" formControlName="preferredlanguage">
              <option *ngFor="let list of languageList" [value]="list.CODE">{{list.NAME}}</option>
            </select>
            <label>Preferred Language</label>
          </div>
            
          <div>
            <app-validation-error-messages
              [formData]="{'formName': personalDetails, 'fieldName': 'voicesmsreq','validation_messages': validation_messages['voicesmsreq'] }">
            </app-validation-error-messages>
          </div>
        </div>

        <div class="col-12 text-center mt-3">
          <button type="submit" id="personal-save-button" class="btn btn-primary w-50">
            Save
          </button>
        </div>
      </div>
    </form>
    
</div>
